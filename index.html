<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <form method="post" action="https://httpbin.org/post" id="form1">
      <label for="Name">Name</label>
      <input
        type="text"
        name=""
        id="Name"
        data-length-min="2"
        data-length-max="10"
        data-label="First Name"
        required
      />
      <br />
      <br />
      <button type="submit" value="" id="SubmitBtn1">Submit</button>
    </form>
    <!-- <form method="post" action="#" id="form2">
      <label for="PhoneNumber">Phone number</label>
      <input
        type="number"
        name=""
        id="PhoneNumber"
        data-length-min="2"
        data-length-max="10"
        data-label="Phone Number"
      />
      <br />
      <br />
      <button type="submit" value="">Submit</button> -->
    </form>
  </body>
  <!-- <script src="scripts.js"></script> -->
   <script src="validator.js"></script>
  <script>
   let formElem1 = document.querySelector('#form1');

   formElem1.addEventListener('submit',(event)=>{
    
    event.preventDefault();
    const validatorResponse = checkValidations(formElem1);

    if(validatorResponse.responseStatus == true){
      const apiURL = "https://httpbin.org/post";
      const formData = {
        username : 'John Doe',
        email: 'john@example.com',
        password: 'securepassword123',
      };

      fetch(apiURL,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        //signal: signal,
        body:JSON.stringify(formData),
      })
      .then(response =>{
        if (!response.ok) {throw new Error('Network response was not ok');}
      return response.json();
      })
      .then(newUserData => console.log('New user data: ',newUserData))
      .catch(error =>{ console.log(error)})
    }
    else{
      //swal notification or something
      console.log(validatorResponse);
    }
    //window.callFromWindow();
    // Create AbortController
    //var stopController = new AbortController();
    //var signal = stopController.signal;
    //stopController.abort();
   });


  </script>
</html>

